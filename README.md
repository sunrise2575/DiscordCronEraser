# DiscordEraserBot

디스코드 채널별로 메시지 수동 및 자동으로 왕창 지우는 봇입니다.

사용자로부터 명령이 오거나, 메시지가 작성된 후 일정 시간 (기본세팅: 1시간) 이 지날 경우 메시지가 삭제됩니다.

개인적인 용도로 만들었습니다.

## 지원하는 기능

`?` 를 입력하면 커맨드를 보여줍니다.
```
.   방금 쳤던 내 메시지 지우는 명령
..  자기가 쳤던거 전부 지우는 명령
... 그냥 전부 지우는 명령
```
모바일에서도 쉽고 빠르게 입력할 수 있도록 `.` 으로만 커맨드를 구성했습니다.

그리고 60분이 지난 메시지는 알아서 삭제합니다.

## 봇을 돌리고 싶어요

### 필요 사항

- MySQL
  MySQL에 `eraser_bot` 이라는 DB를 만들면 된다
  ```
    CREATE DATABASE eraser_bot;
  ```
  `main.go` 파일에 DB 이름같은거 바꿀 수 있으니 확인

- Golang

### 실행 방법

Discord Bot 토큰을 `token.txt` 파일로 준비하고, MySQL DB 비번을 `password.txt` 파일로 준비합니다.

`go run .` 으로 봇을 실행시킵니다.

봇에게 메시지 읽기/삭제/보내기 권한이 모두 있는 채널에서, 아무 메시지나 입력하면 봇이 과거의 메시지의 ID를 자신의 DB에 넣습니다.

최대 14일 치를 읽습니다. 이 과정에서 상당히 많은 시간이 소모될 수 있으니 아예 빈 채널을 하나 파서 시작하는것을 추천합니다.

초기화가 끝나면 커맨드를 사용하시면 됩니다.

이후 채널에 새로 입력되는 메시지도 자신의 DB에 넣습니다. DB는 캐싱 용도이기 때문에 디스코드 메시지가 삭제되면 DB의 데이터도 삭제됩니다.

채널 단위로 커맨드가 들어가기 때문에 한 서버 안에서 여러 채널에 놓고 써도 괜찮습니다 (많이 테스트는 안해봤어요)