# DiscordCronEraser

디스코드 채널별로 메시지 수동 및 자동으로 왕창 지우는 봇입니다.

사용자로부터 명령이 오거나, 메시지가 작성된 후 일정 시간 (기본세팅: 1시간) 이 지날 경우 메시지가 삭제됩니다.

## 지원하는 커맨드

`?` 를 입력하면 커맨드를 보여줍니다.
```
.   방금 쳤던 내 메시지 지우는 명령
..  자기가 쳤던거 최신 100개 지우는 명령
... 그냥 상관없이 최신 100개 지우는 명령
```
모바일에서도 쉽고 빠르게 입력할 수 있도록 `.` 으로만 커맨드를 구성했습니다.

## 실행방법

1. `config.json` 을 작성한다 (`config.example.json` 참고)
   - `admin_user_id`: 봇 운영자 유저 ID (전체 메시지 삭제 권한 있는 사람)
   - `bot_token`: 디스코드 봇 토큰
   - `minute`: 몇분 지난 메시지를 삭제할지 시간 정하기

2. 아래 명령어로 실행
   ```
   cd src/
   go run .
   ```

3. 봇에게 메시지 읽기/삭제/보내기 권한이 모두 있는 채널에서, 아무 메시지나 입력하면 봇이 과거의 메시지의 ID를 자신의 DB에 넣습니다. 최대 14일 치를 읽습니다. 이 과정에서 상당히 많은 시간이 소모될 수 있으니 아예 빈 채널을 하나 파서 시작하는것을 추천합니다.

4 .초기화가 끝나면 커맨드를 사용하시면 됩니다.

5. 이후 채널에 새로 입력되는 메시지도 기억합니다. 디스코드 메시지가 삭제되거나 프로그램이 종료되면 기억하는 메시지도 모두 삭제합니다. 채널 단위로 커맨드가 들어가기 때문에 한 서버 안에서 여러 채널에 놓고 써도 괜찮습니다